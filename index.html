<html>
<head>
<title>Synapsis</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="script.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

	<div id="options">
		<div id="mode">
			Mode: navigate
		</div>
		<div id="instructions">
			<br>Keys:
			<br>Tab: tab between modes
			<br>B: toggle bubble display
			<br>
			<br>Navigate Mode:
			<br>Q: view root node
			<br>
			<br>Edit Mode:
			<br>W: input relationship of node to node 0 (name)
			<br>E: New node with relationship "contains" to current node
			<br>D: delete current node
			<br>hotkeys for synapses to common nodes
			<br>Key2: New synapse between nodes
		</div>
	</div>

	<div id="container">
		<div id="inner_container">
			<div id="branch_container" style="height:500px">
				<!-- <div id="title"></div> -->
				<svg viewbox=".5 .5 626 500">
					<defs>
						<marker id="arrow" markerWidth="10" markerHeight="10" refx="0" refy="2" orient="auto" markerUnits="strokeWidth">
							<path d="M0,0 L0,4 L5,2 z" />
						</marker>
					</defs>
				</svg>
			</div>
			<div id="heading_container">
			</div>
		</div>
	</div>

</body>
<script>
var svg=d3.select("svg");
svg.attr("width",sWidth).attr("height",sHeight);
var div=d3.select("#heading_container");

var root;
var oroot=100;
query("get",oroot);

var mode="navigate";

$(document).keydown(function(e){
	switch(mode){
		case "navigate":
			switch(e.which){
				case 81:
				query("get",oroot);
				break;
		    }
		break;
		case "edit":
			switch(e.which){
				case 87:
				query("rel",root,0,prompt("Enter a name."));
				break;
				case 69:
				query("new",root);
				break;
				case 68:
				if(root){query("del",root);}
				break;
		    }
		break;
	}
	switch(e.which){
		case 9:
			e.preventDefault();
			if(mode=="navigate"){mode="edit";}else{mode="navigate";}
			$("#mode").text("Mode: "+mode);
		break;
		case 66:
			$("#branch_container").toggle();
		break;
	}
});

</script>
</html>