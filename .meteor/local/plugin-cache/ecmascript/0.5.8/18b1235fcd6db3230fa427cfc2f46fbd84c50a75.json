{"metadata":{"usedHelpers":["objectDestructuringEmpty"],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/aldeed:simple-schema","imported":["SimpleSchema"],"specifiers":[{"kind":"named","imported":"SimpleSchema","local":"SimpleSchema"}]},{"source":"meteor/mdg:validated-method","imported":["ValidatedMethod"],"specifiers":[{"kind":"named","imported":"ValidatedMethod","local":"ValidatedMethod"}]},{"source":"./nodes.js","imported":["Nodes","Links"],"specifiers":[{"kind":"named","imported":"Nodes","local":"Nodes"},{"kind":"named","imported":"Links","local":"Links"}]}],"exports":{"exported":["insertNode","insertLink","updateNode"],"specifiers":[{"kind":"local","local":"insertNode","exported":"insertNode"},{"kind":"local","local":"insertLink","exported":"insertLink"},{"kind":"local","local":"updateNode","exported":"updateNode"}]}}},"options":{"filename":"/imports/api/nodes/methods.js","filenameRelative":"/imports/api/nodes/methods.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/api/nodes/methods.js.map","sourceFileName":"/imports/api/nodes/methods.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"methods"},"ignored":false,"code":"module.export({insertNode:function(){return insertNode},insertLink:function(){return insertLink},updateNode:function(){return updateNode}});var _objectDestructuringEmpty;module.import('babel-runtime/helpers/objectDestructuringEmpty',{\"default\":function(v){_objectDestructuringEmpty=v}});var Meteor;module.import('meteor/meteor',{\"Meteor\":function(v){Meteor=v}});var SimpleSchema;module.import('meteor/aldeed:simple-schema',{\"SimpleSchema\":function(v){SimpleSchema=v}});var ValidatedMethod;module.import('meteor/mdg:validated-method',{\"ValidatedMethod\":function(v){ValidatedMethod=v}});var Nodes,Links;module.import('./nodes.js',{\"Nodes\":function(v){Nodes=v},\"Links\":function(v){Links=v}});\n// /imports/api/nodes/methods.js\n\n\n\n\n\nvar insertNode = new ValidatedMethod({\n\tname: 'Nodes.insert',\n\tvalidate: Nodes.schema.validator(),\n\n\trun: function run(_ref) {\n\t\t_objectDestructuringEmpty(_ref);\n\n\t\tNodes.insert({ date: new Date() });\n\t}\n});\n\nvar insertLink = new ValidatedMethod({\n\tname: 'Links.insert',\n\tvalidate: Links.schema.validator(),\n\n\trun: function run(_ref2) {\n\t\tvar subid = _ref2.subid;\n\t\tvar objid = _ref2.objid;\n\t\tvar text = _ref2.text;\n\n\t\tLinks.insert({\n\t\t\tsubject: subject,\n\t\t\tobject: object,\n\t\t\ttext: text,\n\t\t\tdate: new Date()\n\t\t});\n\t}\n});\n\nvar updateNode = new ValidatedMethod({\n\tname: 'Nodes.update',\n\tvalidate: new SimpleSchema({\n\t\t_id: { type: Number },\n\t\tdate: { type: new Date() }\n\t}).validator(),\n\n\trun: function run(_ref3) {\n\t\tvar _id = _ref3._id;\n\t\tvar date = _ref3.date;\n\n\t\tNodes.update({ _id: _id }, {\n\t\t\t$set: { date: date }\n\t\t});\n\t}\n});","ast":null,"map":{"version":3,"sources":["/imports/api/nodes/methods.js"],"names":[],"mappings":";;AACA,SAAS,MAAT,QAAuB,eAAvB;AACA,SAAS,YAAT,QAA6B,6BAA7B;AACA,SAAS,eAAT,QAAgC,6BAAhC;AACA,SAAS,KAAT,EAAgB,KAAhB,QAA6B,YAA7B;;AAEA,OAAO,IAAM,aAAa,IAAI,eAAJ,CAAoB;AAC7C,OAAM,cADuC;AAE7C,WAAU,MAAM,MAAN,CAAa,SAAb,EAFmC;;AAI7C,IAJ6C,qBAIrC;AAAA;;AACP,QAAM,MAAN,CAAa,EAAE,MAAM,IAAI,IAAJ,EAAR,EAAb;AACA;AAN4C,CAApB,CAAnB;;AASP,OAAO,IAAM,aAAa,IAAI,eAAJ,CAAoB;AAC7C,OAAM,cADuC;AAE7C,WAAU,MAAM,MAAN,CAAa,SAAb,EAFmC;;AAI7C,IAJ6C,sBAIjB;AAAA,MAAtB,KAAsB,SAAtB,KAAsB;AAAA,MAAf,KAAe,SAAf,KAAe;AAAA,MAAR,IAAQ,SAAR,IAAQ;;AAC3B,QAAM,MAAN,CAAa;AACZ,mBADY;AAEZ,iBAFY;AAGZ,aAHY;AAIZ,SAAM,IAAI,IAAJ;AAJM,GAAb;AAMA;AAX4C,CAApB,CAAnB;;AAcP,OAAO,IAAM,aAAa,IAAI,eAAJ,CAAoB;AAC7C,OAAM,cADuC;AAE7C,WAAU,IAAI,YAAJ,CAAiB;AAC1B,OAAK,EAAE,MAAM,MAAR,EADqB;AAE1B,QAAM,EAAE,MAAM,IAAI,IAAJ,EAAR;AAFoB,EAAjB,EAGP,SAHO,EAFmC;;AAO7C,IAP6C,sBAO1B;AAAA,MAAb,GAAa,SAAb,GAAa;AAAA,MAAR,IAAQ,SAAR,IAAQ;;AAClB,QAAM,MAAN,CACC,EAAE,QAAF,EADD,EAEC;AACC,SAAM,EAAE,UAAF;AADP,GAFD;AAMA;AAd4C,CAApB,CAAnB","file":"/imports/api/nodes/methods.js.map","sourcesContent":["// /imports/api/nodes/methods.js\r\nimport { Meteor } from 'meteor/meteor';\r\nimport { SimpleSchema } from 'meteor/aldeed:simple-schema';\r\nimport { ValidatedMethod } from 'meteor/mdg:validated-method';\r\nimport { Nodes, Links } from './nodes.js';\r\n\r\nexport const insertNode = new ValidatedMethod({\r\n\tname: 'Nodes.insert',\r\n\tvalidate: Nodes.schema.validator(),\r\n\r\n\trun({}) {\r\n\t\tNodes.insert({ date: new Date() });\r\n\t}\r\n});\r\n\r\nexport const insertLink = new ValidatedMethod({\r\n\tname: 'Links.insert',\r\n\tvalidate: Links.schema.validator(),\r\n\r\n\trun({ subid, objid, text }) {\r\n\t\tLinks.insert({\r\n\t\t\tsubject,\r\n\t\t\tobject,\r\n\t\t\ttext,\r\n\t\t\tdate: new Date()\r\n\t\t});\r\n\t}\r\n});\r\n\r\nexport const updateNode = new ValidatedMethod({\r\n\tname: 'Nodes.update',\r\n\tvalidate: new SimpleSchema({\r\n\t\t_id: { type: Number },\r\n\t\tdate: { type: new Date() }\r\n\t}).validator(),\r\n\r\n\trun({ _id, date }) {\r\n\t\tNodes.update(\r\n\t\t\t{ _id },\r\n\t\t\t{\r\n\t\t\t\t$set: { date }\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n});"]},"hash":"18b1235fcd6db3230fa427cfc2f46fbd84c50a75"}
